[
  {
    "timestamp": 1757986830061,
    "code": "import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Container,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Box,\r\n  Paper,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n} from \"@mui/material\";\r\nimport Navbar from \"../components/Navbar\"; \r\n\r\nfunction AddStudent() {\r\n  const [student, setStudent] = useState({\r\n    name: \"\",\r\n    registerNumber: \"\",\r\n    department: \"\",\r\n    shift: \"\",\r\n  });\r\n  const [qrCode, setQrCode] = useState(\"\");\r\n  const [qrMessage, setQrMessage] = useState(\"\");\r\n\r\n  // Fetch QR automatically\r\n  const fetchQr = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5000/generate-qr\");\r\n      setQrCode(response.data.qrCode);\r\n      setQrMessage(\"\");\r\n    } catch (error) {\r\n      setQrCode(\"\");\r\n      setQrMessage(\"QR code is only available between 1 PM and 3 PM\");\r\n    }\r\n  };\r\n\r\n  // Run once on load + refresh every minute\r\n  useEffect(() => {\r\n    fetchQr();\r\n    const interval = setInterval(fetchQr, 60000); // refresh every 60 sec\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleAddStudent = async () => {\r\n    try {\r\n      await axios.post(\"http://localhost:5000/add-student\", student);\r\n      alert(\"Student added successfully!\");\r\n      setStudent({ name: \"\", registerNumber: \"\", department: \"\", shift: \"\" });\r\n    } catch (error) {\r\n      console.error(\"Error adding student:\", error);\r\n      alert(\"Failed to add student.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\r\n        <Paper elevation={3} sx={{ p: 4 }}>\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            Admin Panel - Add Student\r\n          </Typography>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Student Name\"\r\n                variant=\"outlined\"\r\n                value={student.name}\r\n                onChange={(e) => setStudent({ ...student, name: e.target.value })}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Register Number\"\r\n                variant=\"outlined\"\r\n                value={student.registerNumber}\r\n                onChange={(e) =>\r\n                  setStudent({ ...student, registerNumber: e.target.value })\r\n                }\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl fullWidth variant=\"outlined\">\r\n                <InputLabel>Department</InputLabel>\r\n                <Select\r\n                  value={student.department}\r\n                  onChange={(e) =>\r\n                    setStudent({ ...student, department: e.target.value })\r\n                  }\r\n                  label=\"Department\"\r\n                >\r\n                  <MenuItem value=\"BSc IT\">BSc IT</MenuItem>\r\n                  <MenuItem value=\"BSc CS\">BSc CS</MenuItem>\r\n                  <MenuItem value=\"BCA\">BCA</MenuItem>\r\n                  <MenuItem value=\"BSc DS\">BSc DS</MenuItem>\r\n                  <MenuItem value=\"BSc AI\">BSc AI</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl fullWidth variant=\"outlined\">\r\n                <InputLabel>Shift</InputLabel>\r\n                <Select\r\n                  value={student.shift}\r\n                  onChange={(e) =>\r\n                    setStudent({ ...student, shift: e.target.value })\r\n                  }\r\n                  label=\"Shift\"\r\n                >\r\n                  <MenuItem value=\"I\">I</MenuItem>\r\n                  <MenuItem value=\"II\">II</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleAddStudent}\r\n              >\r\n                Add Student\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/* QR Section */}\r\n          <Box sx={{ mt: 4, textAlign: \"center\" }}>\r\n            {qrCode ? (\r\n              <>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  QR Code (Valid 1 PM - 3 PM)\r\n                </Typography>\r\n                <img\r\n                  src={qrCode}\r\n                  alt=\"QR Code\"\r\n                  style={{ width: \"200px\", height: \"200px\" }}\r\n                />\r\n              </>\r\n            ) : (\r\n              <Typography color=\"error\">{qrMessage}</Typography>\r\n            )}\r\n          </Box>\r\n        </Paper>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddStudent;\r\n"
  },
  {
    "timestamp": 1757989589797,
    "code": "import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Container,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Box,\r\n  Paper,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n} from \"@mui/material\";\r\nimport Navbar from \"../components/Navbar\"; \r\n\r\nfunction AddStudent() {\r\n  const [student, setStudent] = useState({\r\n    name: \"\",\r\n    registerNumber: \"\",\r\n    department: \"\",\r\n    shift: \"\",\r\n  });\r\n  const [qrCode, setQrCode] = useState(\"\");\r\n  const [qrMessage, setQrMessage] = useState(\"\");\r\n\r\n  // Fetch QR automatically\r\n  const fetchQr = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5000/generate-qr\");\r\n      setQrCode(response.data.qrCode);\r\n      setQrMessage(\"\");\r\n    } catch (error) {\r\n      setQrCode(\"\");\r\n      setQrMessage(\"QR code is only available between 1 PM and 3 PM\");\r\n    }\r\n  };\r\n\r\n  // Run once on load + refresh every minute\r\n  useEffect(() => {\r\n    fetchQr();\r\n    const interval = setInterval(fetchQr, 60000); // refresh every 60 sec\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleAddStudent = async () => {\r\n    try {\r\n      await axios.post(\"http://localhost:5000/add-student\", student);\r\n      alert(\"Student added successfully!\");\r\n      setStudent({ name: \"\", registerNumber: \"\", department: \"\", shift: \"\" });\r\n    } catch (error) {\r\n      console.error(\"Error adding student:\", error);\r\n      alert(\"Failed to add student.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\r\n        <Paper elevation={3} sx={{ p: 4 }}>\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            Admin Panel - Add Student\r\n          </Typography>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Student Name\"\r\n                variant=\"outlined\"\r\n                value={student.name}\r\n                onChange={(e) => setStudent({ ...student, name: e.target.value })}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Register Number\"\r\n                variant=\"outlined\"\r\n                value={student.registerNumber}\r\n                onChange={(e) =>\r\n                  setStudent({ ...student, registerNumber: e.target.value })\r\n                }\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl fullWidth variant=\"outlined\">\r\n                <InputLabel>Department</InputLabel>\r\n                <Select\r\n                  value={student.department}\r\n                  onChange={(e) =>\r\n                    setStudent({ ...student, department: e.target.value })\r\n                  }\r\n                  label=\"Department\"\r\n                >\r\n                  <MenuItem value=\"BSc IT\">BSc IT</MenuItem>\r\n                  <MenuItem value=\"BSc CS\">BSc CS</MenuItem>\r\n                  <MenuItem value=\"BCA\">BCA</MenuItem>\r\n                  <MenuItem value=\"BSc DS\">BSc DS</MenuItem>\r\n                  <MenuItem value=\"BSc AI\">BSc AI</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl fullWidth variant=\"outlined\">\r\n                <InputLabel>Shift</InputLabel>\r\n                <Select\r\n                  value={student.shift}\r\n                  onChange={(e) =>\r\n                    setStudent({ ...student, shift: e.target.value })\r\n                  }\r\n                  label=\"Shift\"\r\n                >\r\n                  <MenuItem value=\"I\">I</MenuItem>\r\n                  <MenuItem value=\"II\">II</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleAddStudent}\r\n              >\r\n                Add Student\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/* QR Section */}\r\n          <Box sx={{ mt: 4, textAlign: \"center\" }}>\r\n            {qrCode ? (\r\n              <>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  QR Code (Valid 1 PM - 3 PM)\r\n                </Typography>\r\n                <img\r\n                  src={qrCode}\r\n                  alt=\"QR Code\"\r\n                  style={{ width: \"200px\", height: \"200px\" }}\r\n                />\r\n              </>\r\n            ) : (\r\n              <Typography color=\"error\">{qrMessage}</Typography>\r\n            )}\r\n          </Box>\r\n        </Paper>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddStudent;\r\n"
  }
]